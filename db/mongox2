FROM mongo:6-jammy

# Copy the keyfile from your local machine to the container
COPY ./configs/mongo2.conf /etc/mongo/mongod.conf
COPY ./mongokey /data/key/mongokey

# Set the correct permissions and ownership for the keyfile
RUN chmod 600 /data/key/mongokey && chown mongodb:mongodb /data/key/mongokey

# Use the default MongoDB entrypoint
CMD ["mongod", "--config", "/etc/mongo/mongod.conf"]
